create database divein;
use divein;
create table usuario (
	idUsuario int primary key auto_increment,
    nome varchar (100) not null,
    sobrenome varchar (100) not null,
    email varchar (100) not null,
    senha varchar (45) not null
);
create table criatura (
	idCriatura int primary key auto_increment,
    imagem varchar (100),
    nome varchar (100) not null,
    nomeCientifico varchar (100),
    habitat varchar (1000),
    praia varchar (100) not null,
    uf char (2) not null,
    descricao varchar (1000) not null
);
create table registro (
	usuario_idUsuario int,
    constraint registroUsuario foreign key (usuario_idUsuario) references usuario(idUsuario),
    criatura_idCriatura int,
    constraint registroCriatura foreign key (criatura_idCriatura) references criatura(idCriatura),
    idRegistro int,
    primary key (usuario_idUsuario, criatura_idCriatura, idRegistro),
    dtRegistro datetime
);
insert into usuario (nome, sobrenome, email, senha) values
	('Igor', 'Dias', 'igor.reis@sptech.school', 'Sptech1234');
insert into criatura (imagem, nome, nomeCientifico, habitat, praia, uf, descricao) values
	(NULL, 'Peixe-Boi-Marinho', 'Trichechus manatus', 'Águas rasas e estuários', 'Praia do Paiva', 'PE', 'Mamífero aquático ameaçado de extinção, extremamente dócil e herbívoro.'),
	(NULL, 'Tartaruga-Verde', 'Chelonia mydas', 'Costas arenosas e recifes', 'Praia de Tamandaré', 'PE', 'Uma das tartarugas mais comuns na costa brasileira, muito observada por mergulhadores.'),
	(NULL, 'Tartaruga-Cabeçuda', 'Caretta caretta', 'Águas abertas e costeiras', 'Praia do Forte', 'BA', 'Espécie robusta, encontrada frequentemente em mar aberto e costeiro.'),
	(NULL, 'Golfinho-Rotador', 'Stenella longirostris', 'Águas tropicais e subtropicais', 'Fernando de Noronha', 'PE', 'Famoso por seus saltos e giros, é muito avistado em Noronha.'),
	(NULL, 'Tubarão-Limão', 'Negaprion brevirostris', 'Recifes e áreas rasas', 'Fernando de Noronha', 'PE', 'Tubarão de médio porte, geralmente tranquilo e comum em áreas de recife.'),
	(NULL, 'Tubarão-Enfermeiro', 'Ginglymostoma cirratum', 'Fundos arenosos e recifes', 'Arraial do Cabo', 'RJ', 'Tubarão dócil, passa grande parte do tempo repousando no fundo.'),
	(NULL, 'Peixe-Borboleta', 'Chaetodon striatus', 'Recifes de coral', 'Maracajaú', 'RN', 'Peixe pequeno e colorido, com listras pretas distintivas.'),
	(NULL, 'Peixe-Cirurgião-Azul', 'Acanthurus coeruleus', 'Recifes e mar aberto', 'Porto de Galinhas', 'PE', 'Espécie vibrante e ativa, muito comum nos recifes do nordeste.'),
	(NULL, 'Peixe-Mandarim', 'Synchiropus splendidus', 'Recifes protegidos', 'Arraial do Cabo', 'RJ', 'Peixe extremamente colorido e tímido, encontrado em recifes rasos.'),
	(NULL, 'Moreia-Pintada', 'Gymnothorax moringa', 'Tocas e fendas de recifes', 'Bombinhas', 'SC', 'Moreia de padrão pintado, bastante avistada em mergulhos noturnos.'),
	(NULL, 'Estrela-do-Mar', 'Oreaster reticulatus', 'Áreas rasas de areia e recifes', 'Praia do Frances', 'AL', 'Estrela grande e robusta, comum no nordeste do Brasil.'),
	(NULL, 'Ouriço-Preto', 'Echinometra lucunter', 'Costões rochosos', 'Ilhabela', 'SP', 'Ouriço comum em pedras; atenção aos espinhos.'),
	(NULL, 'Água-Viva', 'Aurelia aurita', 'Águas costeiras', 'Praia Grande', 'SP', 'Espécie translúcida, pode causar leves queimaduras.'),
	(NULL, 'Peixe-Leão (invasor)', 'Pterois volitans', 'Recifes', 'Fernando de Noronha', 'PE', 'Espécie invasora com espinhos venenosos.'),
	(NULL, 'Raia-Jamanta', 'Mobula birostris', 'Águas abertas', 'Abrolhos', 'BA', 'Uma das maiores raias do mundo, dócil e imponente.'),
	(NULL, 'Cavalo-Marinho', 'Hippocampus reidi', 'Manguezais e recifes rasos', 'Praia do Forte', 'BA', 'Espécie ameaçada, muito fotografada.'),
	(NULL, 'Caranguejo-Aranha', 'Stenorhynchus seticornis', 'Recifes', 'Ilha Grande', 'RJ', 'Caranguejo de pernas longas que se camufla entre corais.'),
	(NULL, 'Polvo-Comum', 'Octopus vulgaris', 'Tocas e áreas rochosas', 'Arraial do Cabo', 'RJ', 'Extremamente inteligente, mestre da camuflagem.'),
	(NULL, 'Budião-Azul', 'Scarus coeruleus', 'Recifes de coral', 'Maracajaú', 'RN', 'Peixe herbívoro de coloração vibrante.'),
	(NULL, 'Sardinha-Laje', 'Sardinella brasiliensis', 'Águas costeiras', 'Praia de Santos', 'SP', 'Pequeno peixe que forma grandes cardumes.'),
	(NULL, 'Peixe-Morcego', 'Ogcocephalus vespertilio', 'Fundos arenosos', 'Abrolhos', 'BA', 'Espécie peculiar que "caminha" pelo fundo.'),
	(NULL, 'Baiacu-Espinho', 'Diodon hystrix', 'Recifes e mar aberto', 'Porto Seguro', 'BA', 'Baiacu que infla e expande espinhos ao se assustar.'),
	(NULL, 'Xaréu', 'Caranx hippos', 'Águas abertas', 'Ilha do Mel', 'PR', 'Peixe rápido e forte, visto em cardumes.'),
	(NULL, 'Peixe-Palhaço', 'Amphiprion ocellaris', 'Anêmonas de recife', 'Porto de Galinhas', 'PE', 'Popularmente conhecido pelo filme “Nemo”.'),
	(NULL, 'Anêmona-do-Mar', 'Condylactis gigantea', 'Recifes', 'Maragogi', 'AL', 'Anêmona grande e colorida, abrigo para pequenos peixes.'),
	(NULL, 'Pepino-do-Mar', 'Holothuria grisea', 'Fundos arenosos', 'Praia de Pipa', 'RN', 'Invertebrado filtrador que vive no fundo do mar.'),
	(NULL, 'Coral-Cérebro', 'Diploria labrynthiformis', 'Recifes', 'Abrolhos', 'BA', 'Coral com padrões que lembram um cérebro humano.'),
	(NULL, 'Lula-Transparent', 'Doryteuthis plei', 'Águas rasas', 'Porto Belo', 'SC', 'Lula rápida e translúcida, comum em noites de verão.'),
	(NULL, 'Raia-Chita', 'Aetobatus narinari', 'Fundos arenosos', 'Arraial do Cabo', 'RJ', 'Raia com manchas brancas, elegante e veloz.'),
	(NULL, 'Peixe-Pedra', 'Synanceia verrucosa', 'Recifes', 'Itacaré', 'BA', 'Um dos peixes mais venenosos do mundo, mestre da camuflagem.'),
	(NULL, 'Barracuda', 'Sphyraena barracuda', 'Águas costeiras', 'Ilha Grande', 'RJ', 'Predador ágil e esguio, costuma observar mergulhadores à distância.'),
	(NULL, 'Tartaruga-Oliva', 'Lepidochelys olivacea', 'Águas tropicais', 'Praia do Forte', 'BA', 'Uma das menores espécies de tartaruga marinha.'),
	(NULL, 'Golfinho-Pintado-do-Atlântico', 'Stenella frontalis', 'Águas abertas', 'Natal', 'RN', 'Golfinho muito social e acrobático.'),
	(NULL, 'Peixe-Porco', 'Balistes vetula', 'Recifes de coral', 'Morro de São Paulo', 'BA', 'Peixe territorial com dentes fortes.'),
	(NULL, 'Estrela-Serpente', 'Ophioderma cinerea', 'Recifes rochosos', 'Bombinhas', 'SC', 'Estrela com braços finos e longos.'),
	(NULL, 'Coral-de-Fogo', 'Millepora alcicornis', 'Recifes', 'Carneiros', 'PE', 'Coral urticante que causa queimaduras.'),
	(NULL, 'Água-viva-Púrpura', 'Chrysaora lactea', 'Águas costeiras', 'Ubatuba', 'SP', 'Água-viva comum no sudeste brasileiro.'),
	(NULL, 'Budião-Papagaio', 'Scarus taeniopterus', 'Recifes', 'Maragogi', 'AL', 'Peixe colorido que ajuda a formar areia ao consumir corais mortos.'),
	(NULL, 'Moreia-Verde', 'Gymnothorax funebris', 'Fendas e cavernas', 'Fernando de Noronha', 'PE', 'Moreia de grande porte, geralmente tranquila.'),
	(NULL, 'Arraia-Prego', 'Dasyatis americana', 'Fundos arenosos', 'Paripueira', 'AL', 'Arraia comum em águas rasas, possui ferrão venenoso.'),
	(NULL, 'Polvo-Rocha', 'Octopus insularis', 'Tocas e pedras', 'Arraial do Cabo', 'RJ', 'Uma das espécies mais comuns na costa brasileira.'),
	(NULL, 'Budião-Batata', 'Sparisoma axillare', 'Recifes', 'Maracajaú', 'RN', 'Peixe robusto e herbívoro.'),
	(NULL, 'Cavalo-marinho-do-Mangue', 'Hippocampus reidi', 'Manguezais', 'Praia do Forte', 'BA', 'Encontrado em raízes de mangue e algas.'),
	(NULL, 'Frade', 'Abudefduf saxatilis', 'Recifes', 'Arraial do Cabo', 'RJ', 'Peixe territorial e curioso.'),
	(NULL, 'Caranguejo-Aranha', 'Stenorhynchus seticornis', 'Recifes', 'Porto de Galinhas', 'PE', 'Pequeno caranguejo de aparência peculiar.'),
	(NULL, 'Estrela-do-Mar-Vermelha', 'Echinaster brasiliensis', 'Costões rochosos', 'Ilhabela', 'SP', 'Estrela vermelha comum em mergulhos rasos.'),
	(NULL, 'Peixe-Escorpião', 'Scorpaena plumieri', 'Fundo arenoso', 'Itapuã', 'BA', 'Peixe venenoso, especialista em camuflagem.'),
	(NULL, 'Peixe-Lua', 'Mola mola', 'Águas profundas', 'Praia do Rosa', 'SC', 'Peixe gigante e raro nas costas brasileiras.'),
	(NULL, 'Pargo-Rosa', 'Lutjanus analis', 'Profundidades moderadas', 'Pipa', 'RN', 'Peixe robusto encontrado em recifes profundos.'),
	(NULL, 'Baiacu-Arara', 'Arothron hispidus', 'Recifes e areia', 'Itacimirim', 'BA', 'Baiacu grande e colorido, infla quando ameaçado.'),
	(NULL, 'Lula-Flamejante', 'Doryteuthis plei', 'Águas rasas', 'Bombinhas', 'SC', 'Lula veloz, muito vista à noite.'),
	(NULL, 'Peixe-Porco-Grande', 'Balistes capriscus', 'Costões', 'Guarapari', 'ES', 'Peixe forte e territorial.'),
	(NULL, 'Coris-Verde', 'Thalassoma noronhanum', 'Recifes', 'Noronha', 'PE', 'Peixe verde brilhante, muito comum em recifes brasileiros.'),
	('../assets/garoupa.jpg', 'Garoupa', 'Epinephelidae', 'Tocas ou cavidades', 'Ubatuba', 'SP', 'São habitantes dos oceanos tropicais, sub-tropicais e temperados, vivendo geralmente em fundos coralinos ou rochosos, onde têm o hábito de se esconderem. São predadores activos - a maior parte tem uma boca grande e dentes aguçados, por vezes, mesmo no céu-da-boca. Algumas espécies atingem tamanhos enormes - até 2,40 metros e mais de 300 quilogramas de peso. Muitas têm cores brilhantes e padrões de coloração muito especiais.'),
	('../assets/caravela-portuguesa.avif', 'Caravela-Portuguesa', 'Physalia physalis', 'Águas tropicais e subtropicais quentes dos oceanos Atlântico, Pacífico e Índico', 'Caraguatatuba', 'SP', 'A caravela-portuguesa não se move - flutua à superfície das águas, empurrada pelo vento, com os tentáculos pendentes com a finalidade de capturar peixes para a sua alimentação. Os tentáculos podem atingir um comprimento de 50 metros, mas a média é cerca de 30 metros'),
	('../assets/estrela-do-mar.jpg', 'Estrela-Do-Mar', 'Asteroidea', 'Vivem em todos os oceanos do mundo, desde águas tropicais a polares, e podem ser encontradas desde a zona entre marés até profundidades de cerca de 6.000 metros', 'Praia do Cedro', 'SP', 'Existem cerca de 1.900 espécies de estrela-do-mar em todos os oceanos do mundo, dos trópicos até as gélidas águas polares. Elas são encontradas desde a zona intermareal, descendo para as profundezas abissais, 6.000m (20.000 pés) abaixo da superfície.');
insert into registro (usuario_idUsuario, criatura_idCriatura, idRegistro, dtRegistro) values
	(1, 1, 1, '2024-12-05 10:32:00'),
	(1, 2, 1, '2024-12-08 14:12:00'),
	(1, 3, 1, '2024-12-12 09:55:00'),
	(1, 4, 1, '2024-12-15 16:21:00'),
	(1, 5, 1, '2024-12-18 11:42:00'),
	(1, 6, 1, '2024-12-22 13:08:00'),
	(1, 7, 1, '2024-12-27 08:49:00'),
	(1, 8, 1, '2024-12-28 17:37:00'),
	(1, 9, 1, '2025-01-03 10:21:00'),
	(1, 10, 1, '2025-01-05 15:42:00'),
	(1, 11, 1, '2025-01-07 11:33:00'),
	(1, 12, 1, '2025-01-10 09:15:00'),
	(1, 13, 1, '2025-01-11 14:26:00'),
	(1, 14, 1, '2025-01-14 16:04:00'),
	(1, 15, 1, '2025-01-18 10:44:00'),
	(1, 16, 1, '2025-01-21 12:37:00'),
	(1, 17, 1, '2025-01-25 08:22:00'),
	(1, 18, 1, '2025-01-27 17:19:00'),
	(1, 19, 1, '2025-02-03 11:11:00'),
	(1, 20, 1, '2025-02-08 15:07:00'),
	(1, 21, 1, '2025-03-05 09:31:00'),
	(1, 22, 1, '2025-03-11 13:45:00'),
	(1, 23, 1, '2025-03-16 10:55:00'),
	(1, 24, 1, '2025-03-22 16:33:00'),
	(1, 25, 1, '2025-04-04 14:48:00'),
	(1, 26, 1, '2025-04-06 09:21:00'),
	(1, 27, 1, '2025-04-12 17:32:00'),
	(1, 28, 1, '2025-04-15 11:03:00'),
	(1, 29, 1, '2025-04-21 08:59:00'),
	(1, 30, 1, '2025-05-03 10:42:00'),
	(1, 31, 1, '2025-05-08 12:18:00'),
	(1, 32, 1, '2025-05-12 16:49:00'),
	(1, 33, 1, '2025-05-18 09:37:00'),
	(1, 34, 1, '2025-06-02 15:11:00'),
	(1, 35, 1, '2025-06-04 10:03:00'),
	(1, 36, 1, '2025-06-10 14:59:00'),
	(1, 37, 1, '2025-06-14 09:41:00'),
	(1, 38, 1, '2025-06-18 17:08:00'),
	(1, 39, 1, '2025-06-25 11:29:00'),
	(1, 40, 1, '2025-06-29 13:54:00'),
	(1, 41, 1, '2025-07-03 09:15:00'),
	(1, 42, 1, '2025-07-04 11:44:00'),
	(1, 43, 1, '2025-07-06 16:32:00'),
	(1, 44, 1, '2025-07-08 10:18:00'),
	(1, 45, 1, '2025-07-10 15:27:00'),
	(1, 46, 1, '2025-07-12 09:33:00'),
	(1, 47, 1, '2025-07-14 14:09:00'),
	(1, 48, 1, '2025-07-16 17:51:00'),
	(1, 49, 1, '2025-07-18 12:22:00'),
	(1, 50, 1, '2025-07-21 09:34:00'),
	(1, 51, 1, '2025-07-23 16:14:00'),
	(1, 52, 1, '2025-07-25 10:46:00'),
	(1, 53, 1, '2025-07-27 15:33:00'),
	(1, 54, 1, '2025-07-28 11:02:00'),
	(1, 55, 1, '2025-07-29 08:48:00'),
	(1, 56, 1, '2025-08-02 14:32:00'),
	(1, 1, 2, '2025-09-03 15:54:00'),
	(1, 3, 2, '2025-09-06 11:42:00'),
	(1, 5, 2, '2025-09-10 13:16:00'),
	(1, 11, 2, '2025-09-14 09:18:00'),
	(1, 14, 2, '2025-10-02 10:48:00'),
	(1, 17, 2, '2025-10-05 14:27:00'),
	(1, 21, 2, '2025-10-09 16:59:00'),
	(1, 23, 2, '2025-10-11 11:15:00'),
	(1, 26, 2, '2025-10-15 09:07:00'),
	(1, 28, 2, '2025-10-18 15:44:00'),
	(1, 32, 2, '2025-10-20 10:29:00'),
	(1, 34, 2, '2025-10-22 17:01:00'),
	(1, 38, 2, '2025-10-27 09:56:00'),
	(1, 40, 2, '2025-10-29 14:22:00'),
	(1, 42, 2, '2025-11-03 11:41:00'),
	(1, 44, 2, '2025-11-05 13:58:00'),
	(1, 48, 2, '2025-11-08 16:47:00'),
	(1, 51, 2, '2025-11-11 10:33:00'),
	(1, 54, 2, '2025-11-15 09:12:00'),
	(1, 43, 2, '2025-11-18 12:41:00'),
	(1, 45, 2, '2025-11-22 15:29:00'),
	(1, 46, 2, '2025-11-27 08:55:00');
SELECT count(c.nome) as quantidade, date_format(r.dtRegistro, '%Y/%m') as periodo from criatura as c join registro as r on c.idCriatura = r.criatura_idCriatura group by periodo order by periodo limit 12;
select count(nome) as totalCriatura from criatura;
create view criaturaUsuario as select count(distinct criatura_idCriatura) as totalUsuario, usuario_idUsuario from registro group by usuario_idUsuario;
select totalUsuario, usuario_idUsuario as usuario from criaturaUsuario where usuario_idUsuario = 1;
create view datas as SELECT count(c.nome) as quantidade, date_format(r.dtRegistro, '%Y/%m') as periodo from criatura as c join registro as r on c.idCriatura = r.criatura_idCriatura group by periodo order by periodo limit 12;